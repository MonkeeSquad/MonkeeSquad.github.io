(this.webpackJsonptickethamster=this.webpackJsonptickethamster||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(11),i=n.n(a),r=(n(71),n(10)),o=n(114),l=(n(72),n(115)),j=n(116),d=n(3),u=function(){var e=Object(c.useContext)(Q).setDisplayed,t=Object(c.useState)(null),n=Object(r.a)(t,2),s=n[0],a=n[1],i=function(t){e(t),a(null)};return Object(d.jsxs)("div",{className:"NavMenu",children:[Object(d.jsx)("button",{className:"NavMenuBtn",onClick:function(e){a(e.currentTarget)},children:Object(d.jsx)("p",{className:"hamburger",children:"|||"})}),Object(d.jsxs)(l.a,{id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){a(null)},children:[Object(d.jsx)(j.a,{onClick:function(){return i("Skaner")},children:"Skaner"}),Object(d.jsx)(j.a,{onClick:function(){return i("Tickets")},children:"Bilety"}),Object(d.jsx)(j.a,{onClick:function(){return i("Promocje")},children:"Promocje"}),Object(d.jsx)(j.a,{onClick:function(){return i("Offline")},children:"Offline Mode"}),Object(d.jsx)(j.a,{onClick:function(){return i("Admin")},children:"Admin"}),Object(d.jsx)(j.a,{onClick:function(){return i("Logout")},children:"Logout"})]})]})},b=function(e){return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"80",height:"30"}),Object(d.jsx)(u,{})]})},m=n(40),O=n(30),h=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),i=Object(r.a)(a,2),o=i[0],l=i[1],j=Object(m.b)(O.a.auth()),u=Object(r.a)(j,4),b=u[0],h=(u[1],u[2]),x=u[3];return Object(d.jsxs)("div",{className:"SignIn",children:[Object(d.jsxs)("div",{className:"SignIn_section_one",children:[Object(d.jsx)("p",{children:"Welcome To QR Reader!"}),Object(d.jsx)("p",{children:"Time 2 Party"}),h?Object(d.jsx)("p",{children:"Loading..."}):x?Object(d.jsx)("p",{children:x.message}):null]}),Object(d.jsxs)("div",{className:"SignIn_section_two",children:[Object(d.jsx)("p",{className:"SignIn_please_sign_in",children:"Please Sign in"}),Object(d.jsx)("input",{className:"SignIn_login",type:"email",placeholder:"login",value:n,onChange:function(e){return s(e.target.value)}}),Object(d.jsx)("input",{className:"SignIn_password",type:"password",placeholder:"password",value:o,onChange:function(e){return l(e.target.value)}}),Object(d.jsx)("button",{className:"SignIn_button",onClick:function(){return b(n,o)},children:"Let's Start!"})]})]})},x=n(19),p=n.n(x),f=n(27),v=n(60),_=n.n(v),g=n(113),k=n(45),N=n.p+"static/media/scan.97e0b0cb.mp3",w=n.p+"static/media/error.3da050f0.mp3";var y=function(){var e=Object(c.useContext)(Q).ticketsRef,t=Object(c.useState)(!1),n=Object(r.a)(t,2),s=n[0],a=n[1],i=Object(c.useState)(null),o=Object(r.a)(i,2),l=o[0],j=o[1],u=Object(c.useState)([!1,""]),b=Object(r.a)(u,2),m=b[0],O=b[1],h=Object(c.useState)("data"),x=Object(r.a)(h,2),v=x[0],y=x[1],C=Object(c.useState)(""),S=Object(r.a)(C,2),T=S[0],I=S[1],D=Object(c.useState)("tickets"),B=Object(r.a)(D,2),R=B[0],A=B[1],V=Object(c.useState)(0),E=Object(r.a)(V,2),L=E[0],P=E[1],M=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.update({isValid:!1,validatedAt:Date.now()}).then((function(){I("Bilet pomy\u015blnie skasowany")})).catch((function(e){console.error("Error updating document: ",e),I("error: "+e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.update({promoValid:!1}).then((function(){I("Promocja Pomy\u015blne skasowana")})).catch((function(e){console.error("Error updating document: ",e),I("error: "+e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=Object(k.a)(N,{volume:1}),W=Object(r.a)(q,1)[0],z=Object(k.a)(w,{volume:2}),U=Object(r.a)(z,1)[0],J=function(e,t){e.isValid?(M(t),O([!0,"green"]),W()):(I("Bilet zosta\u0142 juz skasowany"),O([!0,"red"]),U())},K=function(e,t){var n=e.promoValid;n?(F(t),O([!0,"green"]),W()):!1===n?(I("Promocja zosta\u0142a ju\u017c wydana"),O([!0,"red"]),U()):(I("Brak promocji w systemie"),O([!0,"red"]),U())},Y=function(e,t){y("error"),I("Bilet nie istnieje w systemie"),O([!0,"red"]),U()},Z=function(){var t=Object(f.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Scanned!: ",n),n&&s&&"tickets"===R?(Date.now(),j(n),a(!1),function(){var t=Object(f.a)(p.a.mark((function t(){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.doc(n);case 2:(c=t.sent).get().then((function(e){e.exists?(console.log("Document data:",e.data()),y(e.data()),J(e.data(),c)):(console.log("No such document!"),Y(e.data()))})).catch((function(e){console.error("Error getting document:",e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()):n&&s&&"promos"===R&&(j(n),a(!1),function(){var t=Object(f.a)(p.a.mark((function t(){var c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.doc(n);case 2:(c=t.sent).get().then((function(e){e.exists?(console.log("Document data:",e.data()),y(e.data()),K(e.data(),c)):(console.log("No such document!"),Y(e.data()))})).catch((function(e){console.error("Error getting document:",e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()());case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(){P(L+=1),O([!1,""])};return Object(d.jsxs)("div",{className:"skaner",children:[Object(d.jsx)("div",{className:"skaner_qr_reader",children:Object(d.jsx)(_.a,{delay:s,onError:function(e){console.error(e)},onScan:Z})}),Object(d.jsx)("div",{className:"skaner_options",children:"tickets"===R?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"skaner_options_button_1 skaner_options_picked",children:"BILETY"}),Object(d.jsx)("button",{className:"skaner_options_button_2",onClick:function(){return A("promos")},children:"PROMOCJE"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{className:"skaner_options_button_1",onClick:function(){return A("tickets")},children:"BILETY"}),Object(d.jsx)("button",{className:"skaner_options_button_2 skaner_options_picked",children:"PROMOCJE"})]})}),Object(d.jsx)("div",{className:"skaner_scan_info",children:Object(d.jsxs)("div",{className:"skaner_scan_info_scan_window",children:["tickets"===R?Object(d.jsx)("p",{children:"QrReader"}):Object(d.jsx)("p",{children:"Promo Reader"}),Object(d.jsx)("p",{children:"Zeskanuj Kod by uzyska\u0107 wi\u0119cej informacji"}),Object(d.jsxs)("p",{children:[" Zeskanowanych w tej sesji: ",L]})]})}),Object(d.jsx)("div",{className:"skaner_scan_button",children:Object(d.jsx)(g.a,{variant:"contained",className:"skaner_scan_button_btn",style:{borderRadius:"10px",boxShadow:"4px 4px 4px rgba(0, 0, 0, 0.5)"},onClick:function(){a(250)},children:"SCAN"})}),"tickets"===R?m[0]?Object(d.jsx)("div",{className:"scan_info scan_info_".concat(m[1]),children:Object(d.jsxs)("div",{className:"scan_info_box scan_info_box_".concat(m[1]," scan_info_").concat(m[1]),children:[Object(d.jsx)("p",{className:"scan_info_box_name",children:v.clientName?v.clientName:"no name"}),Object(d.jsxs)("p",{className:"scan_info_box_code",children:[" KOD: ",l||"no code"]}),Object(d.jsx)("p",{className:"scan_info_box_quantity",children:"Ilo\u015b\u0107 Bilet\xf3w: 1"}),Object(d.jsx)("p",{className:"scan_info_box_type",children:"Rodzaj biletu: --------"}),Object(d.jsx)("p",{className:"scan_info_box_status",children:T||"error"}),Object(d.jsx)(g.a,{variant:"contained",className:"scan_info_button",style:{borderRadius:"10px",boxShadow:"4px 4px 4px rgba(0, 0, 0, 0.5)",marginBottom:"2vh",width:"40vw"},onClick:function(){return H()},children:"Ok"})]})}):null:m[0]?Object(d.jsx)("div",{className:"scan_info scan_info_".concat(m[1]),children:Object(d.jsxs)("div",{className:"scan_info_box scan_info_box_".concat(m[1]," scan_info_").concat(m[1]),children:[Object(d.jsx)("p",{className:"scan_info_box_name",children:v.clientName?v.clientName:"no name"}),"DO WYDAWKI:",Object(d.jsx)("p",{className:"scan_info_box_status",children:v.drinks?v.drinks:"error"}),Object(d.jsx)("p",{className:"scan_info_box_status",children:T}),Object(d.jsx)(g.a,{variant:"contained",className:"skaner_scan_button_btn",style:{borderRadius:"10px",boxShadow:"4px 4px 4px rgba(0, 0, 0, 0.5)",marginBottom:"2vh",width:"40vw"},onClick:function(){return H()},children:"Ok"})]})}):null]})},C=n(46),S=function(e){var t=e.ticket,n=Object(c.useContext)(Q).setIsComponentVisible;return Object(d.jsxs)("div",{className:"ItemConteiner",children:[Object(d.jsxs)("div",{className:"ItemCode",children:[Object(d.jsx)("button",{className:"ItemCode_button",onClick:function(){return n([!0,t])},children:"Detail"}),Object(d.jsxs)("p",{className:"ItemCode_code",children:["KOD: ",t.qrcode]})]}),Object(d.jsxs)("div",{className:"ItemInfo",children:[t.clientName.length<=25?Object(d.jsxs)("p",{children:["Name: ",t.clientName]}):Object(d.jsx)("p",{children:t.clientName}),Object(d.jsx)("p",{children:t.isValid?"Status: Nieskasowany":"Status: skasowany"})]})]})},T=function(e){var t=new Date(e),n=t.getFullYear(),c=t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1;return t.getDate()+"."+c+"."+n+" - "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},I=function(e){var t=Object(c.useContext)(Q),n=t.isComponentVisible,s=t.setIsComponentVisible;return Object(d.jsxs)("div",{className:"TicketDetail",children:[Object(d.jsx)("div",{className:"TicketDetail_name",children:Object(d.jsxs)("div",{className:"TicketDetail_name_box",children:[Object(d.jsxs)("p",{children:["imie: ",n[1].clientName]}),Object(d.jsxs)("p",{children:["Kod QR: ",n[1].qrcode]})]})}),Object(d.jsx)("div",{className:"TicketDetail_status",children:Object(d.jsxs)("div",{className:"TicketDetail_status_box",children:[Object(d.jsxs)("div",{className:"TicketDetail_status_box_col_1",children:[Object(d.jsxs)("p",{children:[" STATUS: ",Object(d.jsx)("br",{}),n[1].isValid?"Nieskasowany":"Skasowany"]}),Object(d.jsxs)("p",{children:["CZAS: ",Object(d.jsx)("br",{}),n[1].isValid?"not known":T(n[1].validatedAt)]})]}),Object(d.jsxs)("div",{className:"TicketDetail_status_box_col_2",children:[Object(d.jsxs)("p",{children:["RODZAJ BILETU:  ",Object(d.jsx)("br",{})," Vip"]}),Object(d.jsxs)("p",{children:["DROGA ZAKUPU:  ",Object(d.jsx)("br",{}),"Online"]})]})]})}),Object(d.jsx)("div",{className:"TicketDetail_promo",children:Object(d.jsxs)("div",{className:"TicketDetail_promo_box",children:[Object(d.jsxs)("p",{children:["promocje/dodatki:",Object(d.jsx)("br",{}),"  2 Shoty ",Object(d.jsx)("br",{})," Lo\u017ca - 5os."]}),"przemyslec wyglad i dodac opcje edycji biletow i wysylania na serw"]})}),Object(d.jsx)("div",{className:"TicketDetail_button",children:Object(d.jsx)(g.a,{variant:"contained",style:{margin:"0.5vh 0",width:"20vw",height:"5vh",borderRadius:"10px"},onClick:function(){s([!1,null])},children:"Close"})})]})},D=function(e){var t=Object(c.useContext)(Q),n=t.ticketsRef,s=t.windowref,a=t.isComponentVisible,i=Object(c.useState)(),o=Object(r.a)(i,2),l=o[0],j=o[1],u=Object(c.useState)("All"),b=Object(r.a)(u,2),m=b[0],O=b[1],h=Object(c.useState)([]),x=Object(r.a)(h,2),v=x[0],_=x[1];Object(c.useEffect)((function(){(function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get();case 2:t=e.sent,_(t.docs.map((function(e){return Object(C.a)(Object(C.a)({},e.data()),{},{id:e.id})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(d.jsxs)("div",{className:"AllTickets",children:[Object(d.jsxs)("div",{className:"searchbox",children:[Object(d.jsx)("div",{className:"searchbox_search",children:Object(d.jsx)("input",{className:"searchbox_search_input",type:"search",placeholder:"search...",onChange:function(e){return j(e.target.value)}})}),Object(d.jsxs)("div",{className:"searchbox_selector",children:[Object(d.jsx)("div",{children:Object(d.jsxs)("label",{className:"searchbox_selector_label",children:["Wszystkie Bilety",Object(d.jsx)("input",{type:"radio",id:"All",name:"Tickets_Type",checked:"All"===m,onChange:function(e){return O(e.target.id)}})]})}),Object(d.jsx)("div",{children:Object(d.jsxs)("label",{className:"searchbox_selector_label",children:["Skasowane Bilety",Object(d.jsx)("input",{type:"radio",id:"Sold",name:"Tickets_Type",onChange:function(e){return O(e.target.id)}})]})})]})]}),v.filter((function(e){return"Sold"!==m||!e.isValid})).filter((function(e){return!l||(!!e.clientName.toLowerCase().includes(l.toLowerCase())||void 0)})).map((function(e,t){return Object(d.jsx)(S,{index:t,ticket:e},t)})),a[0]?Object(d.jsx)("div",{className:"popup",ref:s,children:Object(d.jsx)(I,{})}):null]})},B=function(e){var t=Object(c.useContext)(Q).setDisplayed;return Object(d.jsx)("div",{className:"logout",children:Object(d.jsxs)("div",{className:"logout_window",children:[Object(d.jsx)("p",{className:"logout_window_text",children:"Are you sure want to sign out?"}),Object(d.jsxs)("div",{className:"logout_window_buttons",children:[Object(d.jsx)(g.a,{variant:"contained",style:{margin:"0 6vw",width:"13vh",borderRadius:"10px"},onClick:function(){return O.a.auth().signOut(),void t("Tickets")},children:"Yes!"}),Object(d.jsx)(g.a,{variant:"contained",style:{margin:"0 6vw",width:"13vh",borderRadius:"10px"},onClick:function(){return t("Tickets")},children:"No!"})]})]})})},R=function(e){var t=e.user;return console.log(t),Object(d.jsx)("div",{className:"admin",children:["kfVfgb34Q1VxkR6r1D6H0o3JX8L2","NrLqfRk597QUhrrWEUSQZEGm2nX2"].includes(t.uid)?Object(d.jsx)("p",{children:"ustawienia admina"}):Object(d.jsxs)("p",{children:["You dont have permission.",Object(d.jsx)("br",{})," Contact the administrators to grant you access"]})})},A=function(e){var t=Object(c.useContext)(Q).displayed,n=Object(m.a)(O.a.auth()),s=Object(r.a)(n,3),a=s[0],i=s[1],o=s[2];if(!a)return i?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"background"}),Object(d.jsx)("div",{className:"main",children:Object(d.jsx)("div",{className:"SignIn",children:Object(d.jsxs)("div",{className:"SignIn_section_one",children:[Object(d.jsx)("p",{children:"Welcome To QR Reader!"}),Object(d.jsx)("p",{children:"Time 2 Party"}),Object(d.jsx)("p",{children:"Initialising User..."})]})})})]}):o?Object(d.jsx)("div",{className:"main",children:Object(d.jsxs)("p",{children:["Error: ",o]})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"background"}),Object(d.jsx)("div",{className:"main",children:Object(d.jsx)(h,{})})]});switch(t){case"Skaner":return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"background"}),Object(d.jsx)("div",{className:"main",children:Object(d.jsx)(y,{})})]});case"Tickets":return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"background"}),Object(d.jsx)("div",{className:"main",children:Object(d.jsx)(D,{})})]});case"Logout":return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"background"}),Object(d.jsx)("div",{className:"main",children:Object(d.jsx)(B,{})})]});case"Admin":return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"background"}),Object(d.jsx)("div",{className:"main",children:Object(d.jsx)(R,{user:a})})]});default:return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"background"}),Object(d.jsxs)("div",{className:"main",children:[Object(d.jsx)("p",{children:"problem with setting context."}),Object(d.jsx)("p",{children:"This part of App is still under development or you dont have permission to view it"})]})]})}},V=function(e){return Object(d.jsxs)("div",{className:"footer",children:[Object(d.jsx)("div",{className:"footer_motto",children:"Pora sie najeba\u0107!"}),Object(d.jsxs)("div",{className:"footer_madeBy",children:[Object(d.jsx)("div",{className:"footer_madeBy_madeByLogo",children:Object(d.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"45",height:"25"})}),Object(d.jsxs)("div",{className:"footer_madeBy_madeByTeam",children:[Object(d.jsx)("p",{className:"footer_madeBy_madeByTeam_made",children:"Made By: "}),Object(d.jsx)("p",{className:"footer_madeBy_madeByTeam_by",children:"Monke Squad"})]})]})]})},E=function(e){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"background"}),Object(d.jsxs)("div",{className:"main_pc",children:[Object(d.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"85",height:"55"}),Object(d.jsx)("p",{children:" This App for now is specifically build for and only mobile phones!"}),Object(d.jsx)("p",{children:" On PC please use developer tools and device mode!"}),Object(d.jsx)("p",{children:" On Tablet use build in phone screen renderer!"})]})]})},L=n(47);n(54);L.a.initializeApp({apiKey:"AIzaSyDA2P7mrlQqsxniuob9LRJm1UmVEC5stj4",authDomain:"t2p-qr-reader.firebaseapp.com",projectId:"t2p-qr-reader",storageBucket:"t2p-qr-reader.appspot.com",messagingSenderId:"402343303548",appId:"1:402343303548:web:59ce8958467737f6206cf9"});var P=L.a,M=n(48),F=function(e){var t=e.children;return Object(M.useMediaQuery)({minWidth:"710px"})?t:null},q=function(e){var t=e.children;return Object(M.useMediaQuery)({maxWidth:700})?t:null};var Q=Object(c.createContext)();var W=function(){var e=Object(c.useState)("Tickets"),t=Object(r.a)(e,2),n=t[0],s=t[1],a=function(e,t){var n=Object(c.useState)([e,t]),s=Object(r.a)(n,2),a=s[0],i=s[1],o=Object(c.useRef)(null),l=function(e){o.current&&!o.current.contains(e.target)&&i([!1,null])};return Object(c.useEffect)((function(){return document.addEventListener("click",l,!0),function(){document.removeEventListener("click",l,!0)}})),{windowref:o,isComponentVisible:a,setIsComponentVisible:i}}(!1,null),i=a.windowref,l=a.isComponentVisible,j=a.setIsComponentVisible,u=Object(c.useState)(P.firestore().collection("tickets")),m=Object(r.a)(u,2),O=m[0];return m[1],Object(d.jsx)(o.a,{disableGutters:!0,children:Object(d.jsxs)(Q.Provider,{value:{displayed:n,setDisplayed:s,windowref:i,isComponentVisible:l,setIsComponentVisible:j,ticketsRef:O},children:[Object(d.jsxs)(q,{children:[Object(d.jsx)(b,{}),Object(d.jsx)(A,{}),Object(d.jsx)(V,{})]}),Object(d.jsx)(F,{children:Object(d.jsx)(E,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,118)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};i.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(W,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),z()}},[[88,1,2]]]);
//# sourceMappingURL=main.4eed8332.chunk.js.map