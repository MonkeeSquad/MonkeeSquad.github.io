(this.webpackJsonptickethamster=this.webpackJsonptickethamster||[]).push([[0],{70:function(e,t,n){},72:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(10),i=n.n(a),r=(n(70),n(21)),o=n.n(r),l=n(45),j=n(30),d=n(13),b=n(113),u=(n(72),n(114)),O=n(115),h=n(3),x=function(){var e=Object(c.useContext)(E).setDisplayed,t=s.a.useState(null),n=Object(d.a)(t,2),a=n[0],i=n[1],r=function(t){e(t),i(null)};return Object(h.jsxs)("div",{className:"NavMenu",children:[Object(h.jsx)("button",{className:"NavMenuBtn",onClick:function(e){i(e.currentTarget)},children:Object(h.jsx)("p",{className:"hamburger",children:"|||"})}),Object(h.jsxs)(u.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){i(null)},children:[Object(h.jsx)(O.a,{onClick:function(){return r("Skaner")},children:"Skaner"}),Object(h.jsx)(O.a,{onClick:function(){return r("Tickets")},children:"Bilety"}),Object(h.jsx)(O.a,{onClick:function(){return r("Promocje")},children:"Promocje"}),Object(h.jsx)(O.a,{onClick:function(){return r("Offline")},children:"Offline Mode"}),Object(h.jsx)(O.a,{onClick:function(){return r("Admin")},children:"Admin"}),Object(h.jsx)(O.a,{onClick:function(){return r("Logout")},children:"Logout"})]})]})},m=function(e){return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"80",height:"30"}),Object(h.jsx)(x,{})]})},p=n(40),f=n(29),v=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),i=Object(d.a)(a,2),r=i[0],o=i[1],l=Object(p.b)(f.a.auth()),j=Object(d.a)(l,4),b=j[0],u=(j[1],j[2]),O=j[3];return Object(h.jsxs)("div",{className:"SignIn",children:[Object(h.jsxs)("div",{className:"SignIn_section_one",children:[Object(h.jsx)("p",{children:"Welcome To QR Reader!"}),Object(h.jsx)("p",{children:"Time 2 Party"}),u?Object(h.jsx)("p",{children:"Loading..."}):O?Object(h.jsx)("p",{children:O.message}):null]}),Object(h.jsxs)("div",{className:"SignIn_section_two",children:[Object(h.jsx)("p",{className:"SignIn_please_sign_in",children:"Please Sign in"}),Object(h.jsx)("input",{className:"SignIn_login",type:"email",placeholder:"login",value:n,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("input",{className:"SignIn_password",type:"password",placeholder:"password",value:r,onChange:function(e){return o(e.target.value)}}),Object(h.jsx)("button",{className:"SignIn_button",onClick:function(){return b(n,r)},children:"Let's Start!"})]})]})},g=n(59),_=n.n(g),N=n(112),k=n(46);n(53);k.a.initializeApp({apiKey:"AIzaSyDA2P7mrlQqsxniuob9LRJm1UmVEC5stj4",authDomain:"t2p-qr-reader.firebaseapp.com",projectId:"t2p-qr-reader",storageBucket:"t2p-qr-reader.appspot.com",messagingSenderId:"402343303548",appId:"1:402343303548:web:59ce8958467737f6206cf9"});var w=k.a,y=w.firestore().collection("tickets");var C=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),i=Object(d.a)(a,2),r=i[0],l=i[1],b=Object(c.useState)([!1,""]),u=Object(d.a)(b,2),O=u[0],x=u[1],m=Object(c.useState)("data"),p=Object(d.a)(m,2),f=p[0],v=p[1],g=Object(c.useState)(""),k=Object(d.a)(g,2),w=k[0],C=k[1],S=Object(c.useState)(0),T=Object(d.a)(S,2),I=T[0],D=T[1],B=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.update({isValid:!1,validatedAt:Date.now()}).then((function(){C("Bilet pomy\u015blnie skasowany")})).catch((function(e){console.error("Error updating document: ",e),C("error: "+e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t){e.isValid?(B(t),x([!0,"green"])):(C("Bilet zosta\u0142 juz skasowany"),x([!0,"red"]))},V=function(){var e=Object(j.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Scanned!: ",t),t&&n&&(c=Date.now(),console.log("timestamp",c),l(t),s(!1),function(){var e=Object(j.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.doc(t);case 2:(n=e.sent).get().then((function(e){e.exists?(console.log("Document data:",e.data()),v(e.data()),A(e.data(),n)):(console.log("No such document!"),e.data(),v("error"),C("Bilet nie istnieje w systemie"),x([!0,"red"]))})).catch((function(e){console.error("Error getting document:",e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"skaner",children:[Object(h.jsx)("div",{className:"skaner_qr_reader",children:Object(h.jsx)(_.a,{delay:n,onError:function(e){console.error(e)},onScan:V})}),Object(h.jsx)("div",{className:"skaner_scan_info",children:Object(h.jsxs)("div",{className:"skaner_scan_info_scan_window",children:[Object(h.jsx)("p",{children:"QrReader"}),Object(h.jsx)("p",{children:"Zeskanuj Kod by uzyska\u0107 wi\u0119cej informacji"}),Object(h.jsxs)("p",{children:[" Zeskanowanych w tej sesji: ",I]})]})}),Object(h.jsx)("div",{className:"skaner_scan_button",children:Object(h.jsx)(N.a,{variant:"contained",className:"skaner_scan_button_btn",style:{borderRadius:"10px",boxShadow:"4px 4px 4px rgba(0, 0, 0, 0.5)"},onClick:function(){s(250)},children:"SCAN"})}),O[0]?Object(h.jsx)("div",{className:"scan_info scan_info_".concat(O[1]),children:Object(h.jsxs)("div",{className:"scan_info_box scan_info_box_".concat(O[1]," scan_info_").concat(O[1]),children:[Object(h.jsx)("p",{className:"scan_info_box_name",children:f.clientName}),Object(h.jsxs)("p",{className:"scan_info_box_code",children:[" KOD: ",r]}),Object(h.jsx)("p",{className:"scan_info_box_quantity",children:"Ilo\u015b\u0107 Bilet\xf3w: 3"}),Object(h.jsx)("p",{className:"scan_info_box_type",children:"Rodzaj biletu: VIP"}),Object(h.jsx)("p",{className:"scan_info_box_status",children:w}),Object(h.jsx)(N.a,{variant:"contained",className:"skaner_scan_button_btn",style:{borderRadius:"10px",boxShadow:"4px 4px 4px rgba(0, 0, 0, 0.5)"},onClick:function(){return D(I+=1),void x([!1,""])},children:"Ok"})]})}):null]})},S=function(e){var t=e.ticket,n=Object(c.useContext)(E).setIsComponentVisible;return Object(h.jsxs)("div",{className:"ItemConteiner",children:[Object(h.jsxs)("div",{className:"ItemCode",children:[Object(h.jsx)("button",{className:"ItemCode_button",onClick:function(){return n([!0,t])},children:"Detail"}),Object(h.jsxs)("p",{className:"ItemCode_code",children:["KOD: ",t.qrcode]})]}),Object(h.jsxs)("div",{className:"ItemInfo",children:[t.clientName.length<=25?Object(h.jsxs)("p",{children:["Name: ",t.clientName]}):Object(h.jsx)("p",{children:t.clientName}),Object(h.jsx)("p",{children:t.isValid?"Status: Nieskasowany":"Status: skasowany"})]})]})},T=function(e){var t=new Date(e),n=t.getFullYear(),c=t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1;return t.getDate()+"."+c+"."+n+" - "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},I=function(e){var t=Object(c.useContext)(E),n=t.isComponentVisible,s=t.setIsComponentVisible;return Object(h.jsxs)("div",{className:"TicketDetail",children:[Object(h.jsx)("div",{className:"TicketDetail_name",children:Object(h.jsxs)("div",{className:"TicketDetail_name_box",children:[Object(h.jsxs)("p",{children:["imie: ",n[1].clientName]}),Object(h.jsxs)("p",{children:["Kod QR: ",n[1].qrcode]})]})}),Object(h.jsx)("div",{className:"TicketDetail_status",children:Object(h.jsxs)("div",{className:"TicketDetail_status_box",children:[Object(h.jsxs)("div",{className:"TicketDetail_status_box_col_1",children:[Object(h.jsxs)("p",{children:[" STATUS: ",Object(h.jsx)("br",{}),n[1].isValid?"Nieskasowany":"Skasowany"]}),Object(h.jsxs)("p",{children:["CZAS: ",Object(h.jsx)("br",{}),n[1].isValid?"not known":T(n[1].validatedAt)]})]}),Object(h.jsxs)("div",{className:"TicketDetail_status_box_col_2",children:[Object(h.jsxs)("p",{children:["RODZAJ BILETU:  ",Object(h.jsx)("br",{})," Vip"]}),Object(h.jsxs)("p",{children:["DROGA ZAKUPU:  ",Object(h.jsx)("br",{}),"Online"]})]})]})}),Object(h.jsx)("div",{className:"TicketDetail_promo",children:Object(h.jsxs)("div",{className:"TicketDetail_promo_box",children:[Object(h.jsxs)("p",{children:["promocje/dodatki:",Object(h.jsx)("br",{}),"  2 Shoty ",Object(h.jsx)("br",{})," Lo\u017ca - 5os."]}),"przemyslec wyglad i dodac opcje edycji biletow i wysylania na serw"]})}),Object(h.jsx)("div",{className:"TicketDetail_button",children:Object(h.jsx)(N.a,{variant:"contained",style:{margin:"0.5vh 0",width:"20vw",height:"5vh",borderRadius:"10px"},onClick:function(){s([!1,null])},children:"Close"})})]})},D=function(e){var t=Object(c.useContext)(E),n=t.tickets,s=t.windowref,a=t.isComponentVisible,i=Object(c.useState)(),r=Object(d.a)(i,2),o=r[0],l=r[1],j=Object(c.useState)("All"),b=Object(d.a)(j,2),u=b[0],O=b[1];return Object(h.jsxs)("div",{className:"AllTickets",children:[Object(h.jsxs)("div",{className:"searchbox",children:[Object(h.jsx)("div",{className:"searchbox_search",children:Object(h.jsx)("input",{className:"searchbox_search_input",type:"search",placeholder:"search...",onChange:function(e){return l(e.target.value)}})}),Object(h.jsxs)("div",{className:"searchbox_selector",children:[Object(h.jsx)("div",{children:Object(h.jsxs)("label",{className:"searchbox_selector_label",children:["Wszystkie Bilety",Object(h.jsx)("input",{type:"radio",id:"All",name:"Tickets_Type",checked:"All"===u,onChange:function(e){return O(e.target.id)}})]})}),Object(h.jsx)("div",{children:Object(h.jsxs)("label",{className:"searchbox_selector_label",children:["Skasowane Bilety",Object(h.jsx)("input",{type:"radio",id:"Sold",name:"Tickets_Type",onChange:function(e){return O(e.target.id)}})]})})]})]}),n.filter((function(e){return"Sold"!==u||!e.isValid})).filter((function(e){return!o||(!!e.clientName.toLowerCase().includes(o.toLowerCase())||void 0)})).map((function(e,t){return Object(h.jsx)(S,{index:t,ticket:e},t)})),a[0]?Object(h.jsx)("div",{className:"popup",ref:s,children:Object(h.jsx)(I,{})}):null]})},B=function(e){var t=Object(c.useContext)(E).setDisplayed;return Object(h.jsx)("div",{className:"logout",children:Object(h.jsxs)("div",{className:"logout_window",children:[Object(h.jsx)("p",{className:"logout_window_text",children:"Are you sure want to sign out?"}),Object(h.jsxs)("div",{className:"logout_window_buttons",children:[Object(h.jsx)(N.a,{variant:"contained",style:{margin:"0 6vw",width:"13vh",borderRadius:"10px"},onClick:function(){return f.a.auth().signOut(),void t("Tickets")},children:"Yes!"}),Object(h.jsx)(N.a,{variant:"contained",style:{margin:"0 6vw",width:"13vh",borderRadius:"10px"},onClick:function(){return t("Tickets")},children:"No!"})]})]})})},A=function(e){var t=Object(c.useContext)(E).displayed,n=Object(p.a)(f.a.auth()),s=Object(d.a)(n,3),a=s[0],i=s[1],r=s[2];if(!a)return i?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"background"}),Object(h.jsx)("div",{className:"main",children:Object(h.jsx)("div",{className:"SignIn",children:Object(h.jsxs)("div",{className:"SignIn_section_one",children:[Object(h.jsx)("p",{children:"Welcome To QR Reader!"}),Object(h.jsx)("p",{children:"Time 2 Party"}),Object(h.jsx)("p",{children:"Initialising User..."})]})})})]}):r?Object(h.jsx)("div",{className:"main",children:Object(h.jsxs)("p",{children:["Error: ",r]})}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"background"}),Object(h.jsx)("div",{className:"main",children:Object(h.jsx)(v,{})})]});switch(t){case"Skaner":return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"background"}),Object(h.jsx)("div",{className:"main",children:Object(h.jsx)(C,{})})]});case"Tickets":return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"background"}),Object(h.jsx)("div",{className:"main",children:Object(h.jsx)(D,{})})]});case"Logout":return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"background"}),Object(h.jsx)("div",{className:"main",children:Object(h.jsx)(B,{})})]});default:return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"background"}),Object(h.jsxs)("div",{className:"main",children:[Object(h.jsx)("p",{children:"problem with setting context."}),Object(h.jsx)("p",{children:"This part of App is still under development or you dont have permission to view it"})]})]})}},V=function(e){return Object(h.jsxs)("div",{className:"footer",children:[Object(h.jsx)("div",{className:"footer_motto",children:"Pora sie najeba\u0107!"}),Object(h.jsxs)("div",{className:"footer_madeBy",children:[Object(h.jsx)("div",{className:"footer_madeBy_madeByLogo",children:Object(h.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"45",height:"25"})}),Object(h.jsxs)("div",{className:"footer_madeBy_madeByTeam",children:[Object(h.jsx)("p",{className:"footer_madeBy_madeByTeam_made",children:"Made By: "}),Object(h.jsx)("p",{className:"footer_madeBy_madeByTeam_by",children:"Monke Squad"})]})]})]})},R=function(e){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"background"}),Object(h.jsxs)("div",{className:"main_pc",children:[Object(h.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"85",height:"55"}),Object(h.jsx)("p",{children:" This App for now is specifically build for and only mobile phones!"}),Object(h.jsx)("p",{children:" On PC please use developer tools and device mode!"}),Object(h.jsx)("p",{children:" On Tablet use build in phone screen renderer!"})]})]})},L=n(47),M=function(e){var t=e.children;return Object(L.useMediaQuery)({minWidth:"710px"})?t:null},P=function(e){var t=e.children;return Object(L.useMediaQuery)({maxWidth:700})?t:null};var E=Object(c.createContext)();var F=function(){var e=Object(c.useState)("Tickets"),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),i=Object(d.a)(a,2),r=i[0],u=i[1],O=function(e,t){var n=Object(c.useState)([e,t]),s=Object(d.a)(n,2),a=s[0],i=s[1],r=Object(c.useRef)(null),o=function(e){r.current&&!r.current.contains(e.target)&&i([!1,null])};return Object(c.useEffect)((function(){return document.addEventListener("click",o,!0),function(){document.removeEventListener("click",o,!0)}})),{windowref:r,isComponentVisible:a,setIsComponentVisible:i}}(!1,null),x=O.windowref,p=O.isComponentVisible,f=O.setIsComponentVisible;return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.firestore(),e.next=3,t.collection("tickets").get();case 3:n=e.sent,u(n.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(h.jsx)(b.a,{disableGutters:!0,children:Object(h.jsxs)(E.Provider,{value:{displayed:n,setDisplayed:s,tickets:r,windowref:x,isComponentVisible:p,setIsComponentVisible:f},children:[Object(h.jsxs)(P,{children:[Object(h.jsx)(m,{}),Object(h.jsx)(A,{}),Object(h.jsx)(V,{})]}),Object(h.jsx)(M,{children:Object(h.jsx)(R,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,117)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};i.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),q()}},[[87,1,2]]]);
//# sourceMappingURL=main.5b5480a2.chunk.js.map