(this.webpackJsonptickethamster=this.webpackJsonptickethamster||[]).push([[0],{71:function(e,t,n){},73:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var c=n(2),s=n.n(c),a=n(11),i=n.n(a),r=(n(71),n(21)),o=n.n(r),l=n(45),j=n(30),d=n(10),b=n(115),u=(n(73),n(116)),O=n(117),m=n(3),x=function(){var e=Object(c.useContext)(W).setDisplayed,t=s.a.useState(null),n=Object(d.a)(t,2),a=n[0],i=n[1],r=function(t){e(t),i(null)};return Object(m.jsxs)("div",{className:"NavMenu",children:[Object(m.jsx)("button",{className:"NavMenuBtn",onClick:function(e){i(e.currentTarget)},children:Object(m.jsx)("p",{className:"hamburger",children:"|||"})}),Object(m.jsxs)(u.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:function(){i(null)},children:[Object(m.jsx)(O.a,{onClick:function(){return r("Skaner")},children:"Skaner"}),Object(m.jsx)(O.a,{onClick:function(){return r("Tickets")},children:"Bilety"}),Object(m.jsx)(O.a,{onClick:function(){return r("Promocje")},children:"Promocje"}),Object(m.jsx)(O.a,{onClick:function(){return r("Offline")},children:"Offline Mode"}),Object(m.jsx)(O.a,{onClick:function(){return r("Admin")},children:"Admin"}),Object(m.jsx)(O.a,{onClick:function(){return r("Logout")},children:"Logout"})]})]})},h=function(e){return Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"80",height:"30"}),Object(m.jsx)(x,{})]})},p=n(40),f=n(29),v=function(){var e=Object(c.useState)(""),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(""),i=Object(d.a)(a,2),r=i[0],o=i[1],l=Object(p.b)(f.a.auth()),j=Object(d.a)(l,4),b=j[0],u=(j[1],j[2]),O=j[3];return Object(m.jsxs)("div",{className:"SignIn",children:[Object(m.jsxs)("div",{className:"SignIn_section_one",children:[Object(m.jsx)("p",{children:"Welcome To QR Reader!"}),Object(m.jsx)("p",{children:"Time 2 Party"}),u?Object(m.jsx)("p",{children:"Loading..."}):O?Object(m.jsx)("p",{children:O.message}):null]}),Object(m.jsxs)("div",{className:"SignIn_section_two",children:[Object(m.jsx)("p",{className:"SignIn_please_sign_in",children:"Please Sign in"}),Object(m.jsx)("input",{className:"SignIn_login",type:"email",placeholder:"login",value:n,onChange:function(e){return s(e.target.value)}}),Object(m.jsx)("input",{className:"SignIn_password",type:"password",placeholder:"password",value:r,onChange:function(e){return o(e.target.value)}}),Object(m.jsx)("button",{className:"SignIn_button",onClick:function(){return b(n,r)},children:"Let's Start!"})]})]})},_=n(60),g=n.n(_),k=n(114),N=n(46);n(54);N.a.initializeApp({apiKey:"AIzaSyDA2P7mrlQqsxniuob9LRJm1UmVEC5stj4",authDomain:"t2p-qr-reader.firebaseapp.com",projectId:"t2p-qr-reader",storageBucket:"t2p-qr-reader.appspot.com",messagingSenderId:"402343303548",appId:"1:402343303548:web:59ce8958467737f6206cf9"});var w=N.a,y=n(47),C=n.p+"static/media/scan.97e0b0cb.mp3",S=n.p+"static/media/error.3da050f0.mp3",T=w.firestore().collection("tickets");var I=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),i=Object(d.a)(a,2),r=i[0],l=i[1],b=Object(c.useState)([!1,""]),u=Object(d.a)(b,2),O=u[0],x=u[1],h=Object(c.useState)("data"),p=Object(d.a)(h,2),f=p[0],v=p[1],_=Object(c.useState)(""),N=Object(d.a)(_,2),w=N[0],I=N[1],D=Object(c.useState)("tickets"),B=Object(d.a)(D,2),A=B[0],R=B[1],V=Object(c.useState)(0),L=Object(d.a)(V,2),E=L[0],M=L[1],P=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.update({isValid:!1,validatedAt:Date.now()}).then((function(){I("Bilet pomy\u015blnie skasowany")})).catch((function(e){console.error("Error updating document: ",e),I("error: "+e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=Object(y.a)(C,{volume:1}),q=Object(d.a)(F,1)[0],Q=Object(y.a)(S,{volume:1}),W=Object(d.a)(Q,1)[0],z=function(e,t){e.isValid?(P(t),x([!0,"green"]),q()):(I("Bilet zosta\u0142 juz skasowany"),x([!0,"red"]),W())},U=function(){var e=Object(j.a)(o.a.mark((function e(t){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Scanned!: ",t),t&&n&&(c=Date.now(),console.log("timestamp",c),l(t),s(!1),function(){var e=Object(j.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.doc(t);case 2:(n=e.sent).get().then((function(e){e.exists?(console.log("Document data:",e.data()),v(e.data()),z(e.data(),n)):(console.log("No such document!"),e.data(),v("error"),I("Bilet nie istnieje w systemie"),x([!0,"red"]))})).catch((function(e){console.error("Error getting document:",e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){M(E+=1),x([!1,""])};return Object(m.jsxs)("div",{className:"skaner",children:[Object(m.jsx)("div",{className:"skaner_qr_reader",children:Object(m.jsx)(g.a,{delay:n,onError:function(e){console.error(e)},onScan:U})}),Object(m.jsx)("div",{className:"skaner_options",children:"tickets"==A?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{className:"skaner_options_button_1 skaner_options_picked",children:"BILETY"}),Object(m.jsx)("button",{className:"skaner_options_button_2",onClick:function(){return R("promos")},children:"PROMOCJE"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{className:"skaner_options_button_1",onClick:function(){return R("tickets")},children:"BILETY"}),Object(m.jsx)("button",{className:"skaner_options_button_2 skaner_options_picked",children:"PROMOCJE"})]})}),Object(m.jsx)("div",{className:"skaner_scan_info",children:Object(m.jsxs)("div",{className:"skaner_scan_info_scan_window",children:["tickets"==A?Object(m.jsx)("p",{children:"QrReader"}):Object(m.jsx)("p",{children:"Promo Reader"}),Object(m.jsx)("p",{children:"Zeskanuj Kod by uzyska\u0107 wi\u0119cej informacji"}),Object(m.jsxs)("p",{children:[" Zeskanowanych w tej sesji: ",E]})]})}),Object(m.jsx)("div",{className:"skaner_scan_button",children:Object(m.jsx)(k.a,{variant:"contained",className:"skaner_scan_button_btn",style:{borderRadius:"10px",boxShadow:"4px 4px 4px rgba(0, 0, 0, 0.5)"},onClick:function(){s(250)},children:"SCAN"})}),"tickets"==A?O[0]?Object(m.jsx)("div",{className:"scan_info scan_info_".concat(O[1]),children:Object(m.jsxs)("div",{className:"scan_info_box scan_info_box_".concat(O[1]," scan_info_").concat(O[1]),children:[Object(m.jsx)("p",{className:"scan_info_box_name",children:f.clientName}),Object(m.jsxs)("p",{className:"scan_info_box_code",children:[" KOD: ",r]}),Object(m.jsx)("p",{className:"scan_info_box_quantity",children:"Ilo\u015b\u0107 Bilet\xf3w: 3"}),Object(m.jsx)("p",{className:"scan_info_box_type",children:"Rodzaj biletu: VIP"}),Object(m.jsx)("p",{className:"scan_info_box_status",children:w}),Object(m.jsx)(k.a,{variant:"contained",className:"scan_info_button",style:{borderRadius:"10px",boxShadow:"4px 4px 4px rgba(0, 0, 0, 0.5)",marginBottom:"2vh",width:"40vw"},onClick:function(){return J()},children:"Ok"})]})}):null:O[0]?Object(m.jsx)("div",{className:"scan_info scan_info_".concat(O[1]),children:Object(m.jsxs)("div",{className:"scan_info_box scan_info_box_".concat(O[1]," scan_info_").concat(O[1]),children:["DO WYDAWKI:",Object(m.jsx)("p",{className:"scan_info_box_name",children:f.clientName}),"5 shotow xD",Object(m.jsx)(k.a,{variant:"contained",className:"skaner_scan_button_btn",style:{borderRadius:"10px",boxShadow:"4px 4px 4px rgba(0, 0, 0, 0.5)"},onClick:function(){return J()},children:"Ok"})]})}):null]})},D=function(e){var t=e.ticket,n=Object(c.useContext)(W).setIsComponentVisible;return Object(m.jsxs)("div",{className:"ItemConteiner",children:[Object(m.jsxs)("div",{className:"ItemCode",children:[Object(m.jsx)("button",{className:"ItemCode_button",onClick:function(){return n([!0,t])},children:"Detail"}),Object(m.jsxs)("p",{className:"ItemCode_code",children:["KOD: ",t.qrcode]})]}),Object(m.jsxs)("div",{className:"ItemInfo",children:[t.clientName.length<=25?Object(m.jsxs)("p",{children:["Name: ",t.clientName]}):Object(m.jsx)("p",{children:t.clientName}),Object(m.jsx)("p",{children:t.isValid?"Status: Nieskasowany":"Status: skasowany"})]})]})},B=function(e){var t=new Date(e),n=t.getFullYear(),c=t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1;return t.getDate()+"."+c+"."+n+" - "+(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":"+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},A=function(e){var t=Object(c.useContext)(W),n=t.isComponentVisible,s=t.setIsComponentVisible;return Object(m.jsxs)("div",{className:"TicketDetail",children:[Object(m.jsx)("div",{className:"TicketDetail_name",children:Object(m.jsxs)("div",{className:"TicketDetail_name_box",children:[Object(m.jsxs)("p",{children:["imie: ",n[1].clientName]}),Object(m.jsxs)("p",{children:["Kod QR: ",n[1].qrcode]})]})}),Object(m.jsx)("div",{className:"TicketDetail_status",children:Object(m.jsxs)("div",{className:"TicketDetail_status_box",children:[Object(m.jsxs)("div",{className:"TicketDetail_status_box_col_1",children:[Object(m.jsxs)("p",{children:[" STATUS: ",Object(m.jsx)("br",{}),n[1].isValid?"Nieskasowany":"Skasowany"]}),Object(m.jsxs)("p",{children:["CZAS: ",Object(m.jsx)("br",{}),n[1].isValid?"not known":B(n[1].validatedAt)]})]}),Object(m.jsxs)("div",{className:"TicketDetail_status_box_col_2",children:[Object(m.jsxs)("p",{children:["RODZAJ BILETU:  ",Object(m.jsx)("br",{})," Vip"]}),Object(m.jsxs)("p",{children:["DROGA ZAKUPU:  ",Object(m.jsx)("br",{}),"Online"]})]})]})}),Object(m.jsx)("div",{className:"TicketDetail_promo",children:Object(m.jsxs)("div",{className:"TicketDetail_promo_box",children:[Object(m.jsxs)("p",{children:["promocje/dodatki:",Object(m.jsx)("br",{}),"  2 Shoty ",Object(m.jsx)("br",{})," Lo\u017ca - 5os."]}),"przemyslec wyglad i dodac opcje edycji biletow i wysylania na serw"]})}),Object(m.jsx)("div",{className:"TicketDetail_button",children:Object(m.jsx)(k.a,{variant:"contained",style:{margin:"0.5vh 0",width:"20vw",height:"5vh",borderRadius:"10px"},onClick:function(){s([!1,null])},children:"Close"})})]})},R=function(e){var t=Object(c.useContext)(W),n=t.tickets,s=t.windowref,a=t.isComponentVisible,i=Object(c.useState)(),r=Object(d.a)(i,2),o=r[0],l=r[1],j=Object(c.useState)("All"),b=Object(d.a)(j,2),u=b[0],O=b[1];return Object(m.jsxs)("div",{className:"AllTickets",children:[Object(m.jsxs)("div",{className:"searchbox",children:[Object(m.jsx)("div",{className:"searchbox_search",children:Object(m.jsx)("input",{className:"searchbox_search_input",type:"search",placeholder:"search...",onChange:function(e){return l(e.target.value)}})}),Object(m.jsxs)("div",{className:"searchbox_selector",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("label",{className:"searchbox_selector_label",children:["Wszystkie Bilety",Object(m.jsx)("input",{type:"radio",id:"All",name:"Tickets_Type",checked:"All"===u,onChange:function(e){return O(e.target.id)}})]})}),Object(m.jsx)("div",{children:Object(m.jsxs)("label",{className:"searchbox_selector_label",children:["Skasowane Bilety",Object(m.jsx)("input",{type:"radio",id:"Sold",name:"Tickets_Type",onChange:function(e){return O(e.target.id)}})]})})]})]}),n.filter((function(e){return"Sold"!==u||!e.isValid})).filter((function(e){return!o||(!!e.clientName.toLowerCase().includes(o.toLowerCase())||void 0)})).map((function(e,t){return Object(m.jsx)(D,{index:t,ticket:e},t)})),a[0]?Object(m.jsx)("div",{className:"popup",ref:s,children:Object(m.jsx)(A,{})}):null]})},V=function(e){var t=Object(c.useContext)(W).setDisplayed;return Object(m.jsx)("div",{className:"logout",children:Object(m.jsxs)("div",{className:"logout_window",children:[Object(m.jsx)("p",{className:"logout_window_text",children:"Are you sure want to sign out?"}),Object(m.jsxs)("div",{className:"logout_window_buttons",children:[Object(m.jsx)(k.a,{variant:"contained",style:{margin:"0 6vw",width:"13vh",borderRadius:"10px"},onClick:function(){return f.a.auth().signOut(),void t("Tickets")},children:"Yes!"}),Object(m.jsx)(k.a,{variant:"contained",style:{margin:"0 6vw",width:"13vh",borderRadius:"10px"},onClick:function(){return t("Tickets")},children:"No!"})]})]})})},L=function(e){var t=e.user;return console.log(t),Object(m.jsx)("div",{className:"admin",children:["kfVfgb34Q1VxkR6r1D6H0o3JX8L2","NrLqfRk597QUhrrWEUSQZEGm2nX2"].includes(t.uid)?Object(m.jsx)("p",{children:"ustawienia admina"}):Object(m.jsxs)("p",{children:["You dont have permission.",Object(m.jsx)("br",{})," Contact the administrators to grant you access"]})})},E=function(e){var t=Object(c.useContext)(W).displayed,n=Object(p.a)(f.a.auth()),s=Object(d.a)(n,3),a=s[0],i=s[1],r=s[2];if(!a)return i?Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"background"}),Object(m.jsx)("div",{className:"main",children:Object(m.jsx)("div",{className:"SignIn",children:Object(m.jsxs)("div",{className:"SignIn_section_one",children:[Object(m.jsx)("p",{children:"Welcome To QR Reader!"}),Object(m.jsx)("p",{children:"Time 2 Party"}),Object(m.jsx)("p",{children:"Initialising User..."})]})})})]}):r?Object(m.jsx)("div",{className:"main",children:Object(m.jsxs)("p",{children:["Error: ",r]})}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"background"}),Object(m.jsx)("div",{className:"main",children:Object(m.jsx)(v,{})})]});switch(t){case"Skaner":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"background"}),Object(m.jsx)("div",{className:"main",children:Object(m.jsx)(I,{})})]});case"Tickets":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"background"}),Object(m.jsx)("div",{className:"main",children:Object(m.jsx)(R,{})})]});case"Logout":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"background"}),Object(m.jsx)("div",{className:"main",children:Object(m.jsx)(V,{})})]});case"Admin":return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"background"}),Object(m.jsx)("div",{className:"main",children:Object(m.jsx)(L,{user:a})})]});default:return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"background"}),Object(m.jsxs)("div",{className:"main",children:[Object(m.jsx)("p",{children:"problem with setting context."}),Object(m.jsx)("p",{children:"This part of App is still under development or you dont have permission to view it"})]})]})}},M=function(e){return Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsx)("div",{className:"footer_motto",children:"Pora sie najeba\u0107!"}),Object(m.jsxs)("div",{className:"footer_madeBy",children:[Object(m.jsx)("div",{className:"footer_madeBy_madeByLogo",children:Object(m.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"45",height:"25"})}),Object(m.jsxs)("div",{className:"footer_madeBy_madeByTeam",children:[Object(m.jsx)("p",{className:"footer_madeBy_madeByTeam_made",children:"Made By: "}),Object(m.jsx)("p",{className:"footer_madeBy_madeByTeam_by",children:"Monke Squad"})]})]})]})},P=function(e){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"background"}),Object(m.jsxs)("div",{className:"main_pc",children:[Object(m.jsx)("img",{src:"/logo-black-2.png",alt:"logo",width:"85",height:"55"}),Object(m.jsx)("p",{children:" This App for now is specifically build for and only mobile phones!"}),Object(m.jsx)("p",{children:" On PC please use developer tools and device mode!"}),Object(m.jsx)("p",{children:" On Tablet use build in phone screen renderer!"})]})]})},F=n(48),q=function(e){var t=e.children;return Object(F.useMediaQuery)({minWidth:"710px"})?t:null},Q=function(e){var t=e.children;return Object(F.useMediaQuery)({maxWidth:700})?t:null};var W=Object(c.createContext)();var z=function(){var e=Object(c.useState)("Tickets"),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)([]),i=Object(d.a)(a,2),r=i[0],u=i[1],O=function(e,t){var n=Object(c.useState)([e,t]),s=Object(d.a)(n,2),a=s[0],i=s[1],r=Object(c.useRef)(null),o=function(e){r.current&&!r.current.contains(e.target)&&i([!1,null])};return Object(c.useEffect)((function(){return document.addEventListener("click",o,!0),function(){document.removeEventListener("click",o,!0)}})),{windowref:r,isComponentVisible:a,setIsComponentVisible:i}}(!1,null),x=O.windowref,p=O.isComponentVisible,f=O.setIsComponentVisible;return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.firestore(),e.next=3,t.collection("tickets").get();case 3:n=e.sent,u(n.docs.map((function(e){return Object(l.a)(Object(l.a)({},e.data()),{},{id:e.id})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(m.jsx)(b.a,{disableGutters:!0,children:Object(m.jsxs)(W.Provider,{value:{displayed:n,setDisplayed:s,tickets:r,windowref:x,isComponentVisible:p,setIsComponentVisible:f},children:[Object(m.jsxs)(Q,{children:[Object(m.jsx)(h,{}),Object(m.jsx)(E,{}),Object(m.jsx)(M,{})]}),Object(m.jsx)(q,{children:Object(m.jsx)(P,{})})]})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,119)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),c(e),s(e),a(e),i(e)}))};i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(z,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),U()}},[[88,1,2]]]);
//# sourceMappingURL=main.66784845.chunk.js.map